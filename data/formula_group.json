[
    {
        "name": "0196c31f-2847-7a70-999a-66b6b8510709",
        "grupo": "Global",
        "doctype": "Formula Group",
        "tableformulas": [
            {
                "name": "0196c556-a157-71d1-a01f-e4fca2f9f5ce",
                "formulafield": "Boletim de Medição Ped. SAP▶︎Valor total vigente",
                "modulo": "Boletim de Medição Ped. SAP",
                "formula": "contrato.valor_total_do_contrato",
                "groupfielddoctype": "Contract Measurement SAP Order",
                "groupfieldfieldname": "valortotalvigente",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0196c55a-7454-7ee3-8bce-811958ebf7a5",
                "formulafield": "Boletim de Medição▶︎Faturamento direto (FTD) na fase atual",
                "modulo": "Boletim de Medição",
                "formula": "valor_ativo = sum(contrato.medicao_de_contrato_bm.pedido_sap_de_bm.medicao_atual, contrato.medicao_de_contrato_bm.medicao_vigente = 'Sim')",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "faturamentodireto",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0196c584-b799-72d3-9c73-658913ab3aba",
                "formulafield": "Boletim de Medição▶︎Valor Total Vigente",
                "modulo": "Boletim de Medição",
                "formula": "sum(contrato.medicao_de_contrato_bm.ftd_de_bm.valor_total_da_nota_fiscal, contrato.medicao_de_contrato_bm.medicao_vigente == 'Não')",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "ftdacumulado",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0196c586-f56a-7192-a2da-52fa06afba8f",
                "formulafield": "Boletim de Medição▶︎Saldo contratual anterior (R$)",
                "modulo": "Boletim de Medição",
                "formula": "contrato.valor_total_do_contrato - sum(contrato.medicao_de_contrato_bm.medicao_atual_a, contrato.medicao_de_contrato_bm.medicao_vigente == 'Não')",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "saldo",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0196c597-94b3-7070-9ee0-a0097c218a44",
                "formulafield": "Boletim de Medição▶︎Medição atual (A)",
                "modulo": "Boletim de Medição",
                "formula": "sum(contrato.medicao_de_contrato_bm.medicao_atual_a, contrato.medicao_de_contrato_bm.medicao_vigente == 'Sim')",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "medicaoatual",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0196c59b-b0bd-7e82-84c4-a61781614a40",
                "formulafield": "Boletim de Medição▶︎Medição atual com desconto de FTD (B)",
                "modulo": "Boletim de Medição",
                "formula": "contrato.medicao_de_contrato_bm.medicao_atual_a - contrato.medicao_de_contrato_bm.faturamento_direto_ftd_na_fase_atual",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "medicaoatualdescontoftd",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0196c5a0-2e9c-74a0-bdbe-96ce856dfc4b",
                "formulafield": "Boletim de Medição▶︎Valor total vigente com desconto de FTD",
                "modulo": "Boletim de Medição",
                "formula": "contrato.medicao_de_contrato_bm.valor_total_vigente - contrato.medicao_de_contrato_bm.faturamento_direto_ftd_acumulado",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "totalvigentemenosftd",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0196c5a4-3a9a-7c11-b1e9-4b89b23ab484",
                "formulafield": "Boletim de Medição Ped. SAP▶︎Medição acum. anterior",
                "modulo": "Boletim de Medição Ped. SAP",
                "formula": "sum(contrato.medicao_de_contrato_bm.medicao_atual_a)",
                "groupfielddoctype": "Contract Measurement SAP Order",
                "groupfieldfieldname": "acumuladoatual",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0196c5c2-34a6-7152-982c-9bc2b43bfa4e",
                "formulafield": "Boletim de Medição▶︎Saldo Contratual (%)",
                "modulo": "Boletim de Medição",
                "formula": "(contrato.medicao_de_contrato_bm.saldo_contratual_r * 100)/ contrato.valor_total_do_contrato",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "saldopercentual",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0196c5f1-c47d-7831-9e91-f0a43f32f827",
                "formulafield": "Boletim de Medição▶︎Desconto do REIDI [C] = -3,65% . [B]",
                "modulo": "Boletim de Medição",
                "formula": "valor_percentual = (contrato.percentual_reidi * contrato.medicao_de_contrato_bm.medicao_atual_a)/100\nreid_acumulado = sum(contrato.medicao_de_contrato_bm.desconto_do_reidi_c_3_65_b, contrato.medicao_de_contrato_bm.medicao_vigente == 'Não') + valor_percentual\nvalor_maximo = (contrato.valor_total_do_contrato * 3,65)/100\n\nif reid_acumulado > valor_maximo:\n    return contrato.medicao_de_contrato_bm.medicao_atual_a\nelse\n\treturn contrato.medicao_de_contrato_bm.medicao_atual_a - valor_percentual",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "descontoreidi",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "doctype": "Formula Group Field"
            }
        ]
    }
]